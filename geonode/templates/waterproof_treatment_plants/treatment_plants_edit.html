{% extends "menu.html" %}
{% load i18n %} 
{% load staticfiles %} 
{% load bootstrap_tags %} 
{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_nbs_ca/css/bootstrap-duallistbox.min.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_nbs_ca/css/waterproof_nbs_ca.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof_treatment_plants/css/treatment_plants.css"/>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}waterproof/css/waterproof-common.css"/>
{% endblock %}{% block body_outer %}
<!--header-->
<div class="header-waterproof">
    <div class="row">
        <div class="col-sm-6">
            <h3 >
                <span id="titleFormTreatmentPlant">{% trans "Treatment Plant" %}</span>                
                <button type="button" data-toggle="modal" data-target="#HelpPTAP" id="HelpModalBtnModal" value="Help Modal Button"
                        class="glyphicon glyphicon-question-sign" aria-hidden="true" 
                        style="outline:none; text-decoration:none; color: #0977ca; border-style: none; background-color:transparent;"></button>
            </h3>
        </div>        
        <div class="col-sm-6" style="display: flex;">
            <h3 class="subtitle">{% trans "Treatment plant creation city:" %} <span id="nameCity"></span> </h3>
        </div>
    </div>
    <form data-toggle="validator" role="form" action="">
        <h4 class="text-primary">{% trans "General information" %}</h4>
        <div class="form-group">
            <label>{% trans "Name" %} <span class="text-danger-wp">(*)</span> </label>
            <input type="text" class="form-control" id="idNamePlant" data-error="{% trans "This field is required" %}" placeholder="{% trans "Enter name" %}" required/>
            <div class="help-block with-errors"></div>
        </div>
        <div class="form-group">
            <label>{% trans "Description" %} <span class="text-danger-wp">(*)</span> </label>
            <textarea id="idDescriptionPlant" class="form-control" placeholder="{% trans "Enter description" %}" data-error="{% trans "This field is required" %}"
                rows="4" required></textarea>
            <div class="help-block with-errors"></div>
        </div>

        <div class="form-group">
            <fieldset>
                <h4 class="text-primary">{% trans "Water Intake" %} <span class="text-danger-wp">(*)</span> </h4>
                {% if mode != 'view' %}
                    <p>{% trans "Select the water intakes that supply the drinking water treatment plant. The selected intake will be automatic added to the table."%}</p>
                {% endif %}
                <select  id="idIntakePlant" class="form-control" data-error="{% trans "This field is required" %}" required>
                    <option value="">{% trans "Select an option" %}</option>
                </select>
                <div class="help-block with-errors"></div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-condensed" style="width:100%">
                        <thead>
                            <tr class="info">
                                <th scope="col" class="small text-center vat">{% trans "Name" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Water intake sources" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Infraestructure associated with the DWTP" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Options" %}</th>
                            </tr>
                        </thead>
                        <tbody id="idTbodyIntake"></tbody>
                    </table>
                </div>
                {% if mode != 'view' %}
                <div class="row row-no-gutters">
                    <div class="col-sm-3">
                        <p>{% trans "To enable the diagram, click in the following button"%}:</p>
                    </div>
                    <div class="col-sm-3">
                        <button type="button" class="btn btn-primary" id="idSendIntake">{% trans "Confirm water intakes sources" %}</button>
                    </div>
                </div>
                {% endif %}
            </fieldset>
        </div>
        <div class="form-group">
            <fieldset>
                <h4 class="text-primary">{% trans "Treatment unit process diagram" %} <span class="text-danger-wp">(*)</span> </h4>
                {% if mode != 'view' %}
                <p>{% trans "WaterProof presents below the suggested components or processes for treating the water quality of the selected catchments. Click on the processes that are part of your treatment plant and use the checkbox to enable or disable them." %}</p>
                {% endif %}
                <div class="container-graph">
                    <div class="container-config">
                        <div class="div-scroll">
                            <div class="arrow-right positon-arrow position-arrow-two">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-one">
                                <div class="line-right-one"></div>
                                <div class="point-right-one"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-four-one">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-four">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-five">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-six">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-six-one">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-six-two">
                                <div class="line-right-four"></div>
                                <div class="point-right-four"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-two-seven">
                                <div class="line-right-seven"></div>
                                <div class="point-right-seven"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-three">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-four">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-five">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-six">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-six-left">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-seven">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-eight">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-seven-one">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="arrow-right positon-arrow position-arrow-eight-one">
                                <div class="line-right"></div>
                                <div class="point-right"></div>
                            </div>
                            <div class="container-element container-element-two">
                                <div class="img-container-two img-color-container" id="black1" graphId="2" nameElement="Mezcla rápida" plantElement="MEZCLARAPIDA" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Mezcla rápida" %}</div>
                                <div class="container-change-state" onclick="changeStatus(1, this)"><div class="change-state" id="id1"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Mezcla rápida" plantElement="MEZCLARAPIDA" graphId="2" model="A,B,C,D,E" id="id11d"  idr="id1"></div>
                            </div>
                            <div class="container-element container-element-two-top">
                                <div class="img-container img-color-container" id="black2" graphId="12" nameElement="Dosificación" plantElement="DOSIFICACION" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Dosificación" %}</div>
                                <div class="container-change-state" onclick="changeStatus(2, this)"><div class="change-state" id="id2"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Dosificación" plantElement="DOSIFICACION" graphId="12" model="A,B,C,D,E" id="id21d"  idr="id2"></div>
                            </div>
                            <div class="container-element container-element-three">
                                <div class="img-container-three img-color-container" id="black3" graphId="3" nameElement="Mezcla lenta" plantElement="MEZCLALENTA" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Mezcla lenta" %}</div>
                                <div class="container-change-state" onclick="changeStatus(3, this)"><div class="change-state" id="id3"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Mezcla lenta" plantElement="MEZCLALENTA" graphId="3" model="A,B,C,D,E" id="id31d"  idr="id3"></div>
                            </div>
                            <div class="container-element container-element-four">
                                <div class="img-container-four img-color-container" id="black4" graphId="4" nameElement="Sedimentación" plantElement="SEDIMENTACION" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Sedimentación" %}</div>
                                <div class="container-change-state" onclick="changeStatus(4, this)"><div class="change-state" id="id4"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Sedimentación" plantElement="SEDIMENTACION" graphId="4" model="A,B,C,D,E" id="id41d"  idr="id4"></div>
                            </div>
                            <div class="container-element container-element-five">
                                <div class="img-container-five img-color-container" id="black5" graphId="5" nameElement="Filtración" plantElement="FILTRACION" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Filtración" %}</div>
                                <div class="container-change-state" onclick="changeStatus(5, this)"><div class="change-state" id="id5"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Filtración" plantElement="FILTRACION" graphId="5" model="A,B,C,D,E,F" id="id51d"  idr="id5"></div>
                            </div>
                            <div class="container-element container-element-six">
                                <div class="img-container-six img-color-container" id="black6" graphId="7" nameElement="Filtración por membranas tamaño de particula retenida 0.01 μm" plantElement="FILTRACIONPORMEMBRANANIVEL2" onclick="viewTree(this)"></div>
                                <div class="container-change-state" onclick="changeStatus(6, this)"><div class="change-state" id="id6"></div></div>
                                <div class="text-container-one">{% trans "Filtración por membranas tamaño de particula retenida 0.01 μm" %}</div>
                                <div class="opacity-graph" name="disableElement" nameElement="Filtración por membranas tamaño de particula retenida 0.01 μm" plantElement="FILTRACIONPORMEMBRANANIVEL2" graphId="7" model="" id="id61d"  idr="id6"></div>
                            </div>
                            <div class="container-element container-element-six-left">
                                <div class="img-container-seven img-color-container" id="black7" graphId="6" nameElement="Filtración por membranas tamaño de particula retenida 0.1 μm" plantElement="FILTRACIONPORMEMBRANANIVEL1" onclick="viewTree(this)"></div>
                                <div class="container-change-state" onclick="changeStatus(7, this)"><div class="change-state" id="id7"></div></div>
                                <div class="text-container-one">{% trans "Filtración por membranas tamaño de particula retenida 0.1 μm" %}</div>
                                <div class="opacity-graph" name="disableElement" nameElement="Filtración por membranas tamaño de particula retenida 0.1 μm" plantElement="FILTRACIONPORMEMBRANANIVEL1" graphId="6" model="A,B,E" id="id71d"  idr="id7"></div>
                            </div>
                            <div class="container-element container-element-seven">
                                <div class="img-container-nine img-color-container" id="black8" graphId="8" nameElement="Filtración por membranas tamaño de particula retenida 0.001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL3" onclick="viewTree(this)"></div>
                                <div class="container-change-state" onclick="changeStatus(8, this)"><div class="change-state" id="id8"></div></div>
                                <div class="text-container-one">{% trans "Filtración por membranas tamaño de particula retenida 0.001 μm" %}</div>
                                <div class="opacity-graph" name="disableElement" nameElement="Filtración por membranas tamaño de particula retenida 0.001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL3" graphId="8" model=""  id="id81d"  idr="id8"></div>
                            </div>
                            <div class="container-element container-element-seven-one">
                                <div class="img-container-nine-one img-color-container" id="black9" graphId="9" nameElement="Filtración por membranas tamaño de particula retenida 0.0001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL4" onclick="viewTree(this)"></div>
                                <div class="container-change-state" onclick="changeStatus(9, this)"><div class="change-state" id="id9"></div></div>
                                <div class="text-container-one">{% trans "Filtración por membranas tamaño de particula retenida 0.0001 μm" %}</div>
                                <div class="opacity-graph" name="disableElement" nameElement="Filtración por membranas tamaño de particula retenida 0.0001 μm" plantElement="FILTRACIONPORMEMBRANANIVEL4" graphId="9" model="A" id="id91d"  idr="id9"></div>
                            </div>
                            <div class="container-element container-element-seven-bottom">
                                <div class="img-container-eight img-color-container" id="black10" graphId="13" nameElement="Tratamiento de lodos" plantElement="TRATAMIENTODELODOS" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Tratamiento de lodos" %}</div>
                                <div class="container-change-state" onclick="changeStatus(10, this)"><div class="change-state" id="id10"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Tratamiento de lodos" plantElement="TRATAMIENTODELODOS" graphId="13" model="A,B,C,D,E,F" id="id101d"  idr="id10"></div>
                            </div>
                            <div class="container-element container-element-eight">
                                <div class="img-container-ten img-color-container" id="black11" graphId="10" nameElement="Intercambio iónico" plantElement="INTERCAMBIOIONICO" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Intercambio iónico" %}</div>
                                <div class="container-change-state" onclick="changeStatus(11, this)"><div class="change-state" id="id11"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Intercambio iónico" plantElement="INTERCAMBIOIONICO" graphId="10" model="B,C" id="id111d"  idr="id11"></div>
                            </div>
                            <div class="container-element container-element-eight-one">
                                <div class="img-container-ten-one img-color-container" id="black12" graphId="11" nameElement="Desinfección" plantElement="DESINFECCION" onclick="viewTree(this)"></div>
                                <div class="text-container">{% trans "Desinfección" %}</div>
                                <div class="container-change-state" onclick="changeStatus(12, this)"><div class="change-state" id="id12"></div></div>
                                <div class="opacity-graph" name="disableElement" nameElement="Desinfección" plantElement="DESINFECCION" graphId="11" model="A,B,C,D,E,F,G" id="id121d"  idr="id12"></div>
                            </div>
                        </div>
                    </div>
                    <div id="idBackgroundGraph" class="container-background"></div>    
                </div>
            </fieldset>
        </div>
        <div>
            <h4 class="text-primary">{% trans "Processes, technologies and cost functions" %} <span class="text-danger-wp">(*)</span> </h4>
            {% if mode != 'view' %}
            <p>{% trans "Define the processes that are part of your treatment plant and use the checkbox to enable or disable cost functions. You can also edit, delete or add cost functions." %}.</p>
            {% endif %}
        </div>
        <div class="main-tree-content col-md-12">
            <div>
                <div class="main-point" onclick="viewBranch('mainTree', this)">-</div>
                <div class="text-point-main" id="branch1">{% trans "Treatment Plant" %}</div>
            </div>
            <div class="margin-main col-md-12" id="mainTree" style="display: none;"></div>
        </div>
        <div class="row text-center">
            <div class="col-md-12">
                <button type="button" id="submit" class="btn btn-primary ">{% trans "Save" %}</button>
            </div>
        </div>
        
    </form>
</div>

<div class="modal fade" id="HelpPTAP" tabindex="-1" aria-labelledby="HelpModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title text-center" id="HelpModalLabel" style="color:#6398C1 ;">{% trans "Creation of treatment plants" %}
                </h3>
            </div>
            <div class="modal-body">
                <p>
                    {% trans "Treatment plants are a key element in ROI analysis setup. Once there are water  intakes that deliver the water to the treatment plants, a set of processes is responsible for eliminating coarse solids, resulting in a reduction of the pollutant load in the water, seeking to make it suitable for human consumption, or meet the requirements of current legislation. WaterProof offers  default cost functions forthe following processes:" %}
                </p>
                <table style="border: 1px solid black;">
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/Dosage.png"></img>
                        </td>
                        <td>{% trans "Represents the process in which coagulant is applied to the water to promote the increase in  particle size forming floc, to promote settling of particles." %}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/rapid.png"></img>
                        </td>
                        <td>{% trans "Process in which the coagulant is dispersed uniformly and quickly through turbulence formed by hydraulic or mechanical means." %}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/slow.png"></img>
                        </td>
                        <td>{% trans "Process that relies on channels or structures where the turbulence necessary for floc formation is produced." %}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/sedimentation.png"></img>
                        </td>
                        <td>{% trans "Process in which the floc already formed separates from the water thanks to the low flow velocity and the floc's own weight, allowing it to fall to the bottom of the tank forming a sludge that must be removed for proper management." %}</td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/filtration.png"></img>
                        </td>
                        <td>{% trans "Process in which water is passed through a bed (mainly sand, sand and anthracite) so that particles and certain microorganisms are filtered out and retained within the bed." %}</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/membrane1.png"></img>
                        </td>
                        <td rowspan="4">{% trans "A process in which membranes are used to remove all particles, molecules and microorganisms larger than their pore size. The main classification of advanced filtration establishes four categories: microfiltration, ultrafiltration, nanofiltration and reverse osmosis. The differences in each are the minimum pore sizes, being 100 nanometers (nm) for microfiltration, 10 nm for ultrafiltration, 1 nm for nanofiltration and smaller sizes for reverse osmosis." %}</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/membrane2.png"></img>
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/membrane3.png"></img>
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/membrane4.png"></img>
                        </td>
                    </tr>
                    <tr style="border: 1px solid black;">
                        <td style="border: 1px solid black;"><img style="margin: 10px auto 10px; display: block;" src="/static/geonode/img/desinfection.png"></img>
                        </td>
                        <td>{% trans "A chemical process in which unwanted dissolved ions in water and effluents –  such as nitrate, fluorine, sulfate, and arsenic - are exchanged for other ions with a similar charge. This is done by means of a polymer capable of exchanging ions for other ions in a solution that passes through them. These synthetic gel spheres are called 'Ion Exchange Resins'. Process in which reagents, usually chlorine and ammonia, are added to form chloramines, eliminating any microorganisms that may have survived the previous processes and guaranteeing water quality throughout its journey through the distribution network. The final disposal of sludge from the flocculation and filtration processes is carried out by pumping, thickeners, drying beds or belt filters." %}</td>
                    </tr>

                </table>
                <div>
                    <br>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" style="color: white; background-color: #6398C1;">{% trans "Close" %}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Modal Calculator-->
<div class="modal fade" id="CalculatorModal"  tabindex="-1" aria-labelledby="CalculatorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <form id="form-modal" data-toggle="validator" role="form" action="">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="CalculatorModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <p>{% trans "Use this window to configure your cost function by selecting the variables of your interest: flow, concentration or loads." %}</p>
                            <p>{% trans "Expand the list of items and click to build the function." %}</p>
                        </div>
                    </div>
                    <div class="row">                        
                        <div class="col-md-7">
                            <div class="form-group">
                                <label class="text-primary">{% trans "Cost function name" %} *</label>
                                <input id="costFunctionName" type="text" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="text-primary">{% trans "Cost function description" %}</label>
                                <textarea id="costFuntionDescription" rows="3" class="form-control"></textarea>
                            </div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <label class="text-primary">{% trans "Currency for definition of costs" %} *</label>
                                    <select id="currencyCost" class="form-control" required>
                                        {% for currency in currencies %}                                        
                                            {% if currency.iso3 == 'USA'%}<option value="{{currency.currency}}" data-country="{{currency.iso3}}">({{currency.currency}}) - {{currency.name}}</option>
                                            {% else %}<option value="{{currency.currency}}">({{currency.currency}}) - {{currency.name}}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-xs-6">
                                    <label class="text-primary">{% trans "Multiplying factor for overrall cost" %} *</label>
                                    <input type="text" value="1.00" id="factorCost" class="form-control">
                                </div>
                            </div>                         
                            <h5 class="text-primary keyboard-title">{% trans "Syntax keyboard" %}</h5>
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#mathBasic_tab" data-toggle="tab">{% trans "Basic" %}</a></li>
                                <li style="display:none;"><a href="#mathAdvanced_tab" data-toggle="tab" >{% trans "Advanced" %}</a></li>
                            </ul>
                            <div class="tab-content">
                                <div id="mathBasic_tab" class="tab-pane fade in active">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="=">&#61</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="+">&#43</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="-">&#8722;</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="*">&#215</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="/">a/b</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="^">a^b</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="sqrt">&#8730</button>     
                                    </div>
                                </div>                            
                                <div id="mathAdvanced_tab" class="tab-pane fade in">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="pi">π</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="e">e</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="ln">ln</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="log">log</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="_">a_b</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="%">mod</button>
                                        <button type="button" class="btn btn-default math-btn" name="mathKeyBoard" value="**">&#8731</button>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="panel-group" id="VarCostListGroup" style="max-height: 370px; overflow-y: auto;"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div id="mathNatural" class="tab-pane fade in active">
                                <textarea id="python-expression" class="python-expression" autocapitalize="off" autocomplete="off"
                                        autocorrect="off" spellcheck="false" x-palm-disable-ste-all="true"></textarea>
                                <button type="button" id="btnValidatePyExp">{% trans "Validate" %} </button>
                                <div id="MathPreview" class="preview"></div>
                            </div>
                            <div id="mathLogical" class="tab-pane fade"></div>
                        </div>
                    </div>
                    <br>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans "Close" %}</button>
                        <button type="button" class="btn btn-primary" id="saveAndValideCost">{% trans "Add cost" %}</button>
                    </div>
                </div>
            </div>
        </form>        
    </div>
</div>

{% endblock %} {% block extra_script %}
<script src="{% url 'javascript-catalog-treatment' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"
    integrity="sha512-dTu0vJs5ndrd3kPwnYixvOCsvef5SGYW/zSSK4bcjRBcZHzqThq7pt7PmCv55yb8iBvni0TSeIDV8RYKjZL36A=="
    crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}waterproof_treatment_plants/js/waterproof_list_treatment_plants.js"></script>
<script src="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script type="text/javascript">
    var userCountryId = '{{userCountry.id}}';
    var userCountryCode = '{{userCountry.code}}';
    var userCountryName = '{{userCountry.name}}';
    {% if mode == 'view' %}
    var plantId = '{{plantId}}';
    localStorage.loadInf = "true";
    {% endif %}    
    $(document).ready(function () {        
        initialize();        
    });
</script>
{% endblock %}