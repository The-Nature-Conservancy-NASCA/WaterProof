{% extends "menu.html" %} {% load i18n %} {% load static from staticfiles %} {% load bootstrap_tags %} {% block extra_head %}
<link href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
<link rel="stylesheet" href="{{ STATIC_URL }}geonode/css/leaflet/Control.Coordinates.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}geonode/css/leaflet/Control.Loader.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.css" />
<link rel="stylesheet" href="{{ STATIC_URL }}waterproof_intake/css/intake.css" /> {% endblock %} {% block body_outer %}
<!--header-->
<script type="text/javascript">
    var SelectedCurrency = "{{SelectedCurrency}}";
</script>
<div class="page-header">
    <h1>{% trans "Physical Indicators" %}</h1>
    
</div>
<br>
<!--Begin Form-->
<form id="form" method="POST" action="">
    {% csrf_token %}
    <!--Start smartwizard-->
    <br>
    <div id="smartwizard">
        <!--panel of navigation-->
        <ul class="nav">
            <li>
                <a class="nav-link" href="#step-1">
                    {% trans "Physical idicators (INVEST)" %}
                </a>
            </li>
            <li>
                <a class="nav-link" href="#step-2">
                    {% trans "CPhysical and risk indicators" %}
                </a>
            </li>
            <li>
                <a class="nav-link" href="#step-3">
                    {% trans "Interventtions results" %}
                </a>
            </li>
        </ul>
        <!--Steps-->
        <div class="tab-content" id="autoAdjustHeightF">
            <!--Step 1-->
            <div id="step-1" class="tab-pane" role="tabpanel">
                <div style=" align-items: center;">
                    <h5>{% trans "Water intake" %}
                        <select name="select" id="selectIntake">
                            <option selected disabled>Select a Intake</option>
                            {% for Option in NamesIndicators %}
                            <option value={{Option}} >{{Option}}</option>
                            {% endfor %}
                          </select>
                    </h5>
                </div>
                <div style="text-align: center;">
                        <div style="width: 50%; float: left;">
                            <img src="/static/geonode/img/indicadores-fisicos.png" style="height: 70%; width: 70%; background-repeat: no-repeat; background-position: 50%; border-radius: 50%; background-size: 100% auto; border-color: black;"/>
                        </div>
                        <div style="width: 50%; float: left;">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div id="container"></div>
                                </div>
                            </div>
                        </div>
                    
                </div>
                
                <br>
                <!--Table-->
                <div style="clear:both;" class="table-responsive">
                    <table id="example" class="table table-striped table-bordered table-condensed" style=" width:100%">
                        <thead>
                            <tr class="info">
                                <th scope="col" class="small text-center vat">{% trans "Indicator" %}</th>
                                <th scope="col" class="small text-center vat px-5">{% trans "Change in volume of water yield (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in base flow(%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in total sediments (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in nitrogen load (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in phosphorus Load (%)" %}</th>
                                <th scope="col" class="small text-center vat">{% trans "Change in carbon storage" %}</th>
                                <th scope="col" class="small text-center vat" style="display: none;">{% trans "Date" %}</th>
                                <th scope="col" class="small text-center vat" style="display: none;">{% trans "Name" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for investIndicators in Indicators %}
                            <tr id="filas">
                                <td class="small text-center vat" >{{investIndicators.intake.name}}</td>
                                <td class="small text-center vat truncate" id="valor1">{{investIndicators.awy}}</td>
                                <td class="small text-center vat" id="valor2">{{investIndicators.bf_m3}}</td>
                                <!--td>{{intake.max_benefit_req_time}}</td-->
                                <td class="small text-center vat" id="valor3">{{investIndicators.wsed_ton}}</td>
                                <td class="small text-center vat" id="valor4">{{investIndicators.wn_kg}}</td>
                                <td class="small text-center vat" id="valor5">{{investIndicators.wp_kg}}</td>
                                <td class="small text-center vat" id="valor6">{{investIndicators.wc_ton}}</td>
                                <td class="small text-center vat" style="display: none;">{{investIndicators.date}}</td>
                                <td class="small text-center vat" style="display: none;">{{investIndicators.intake.city.name}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!--Step 2-->
            <div id="step-2" class="tab-pane" role="tabpanel">
            </div>
            <!--Step 3-->
            <div id="step-3" class="tab-pane" role="tabpanel">
            </div>
        </div>

</form>

{% endblock %} {% block extra_script %}
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/highcharts.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/exporting.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/export-data.js"></script>
<script src="{{ STATIC_URL }}lib/Highcharts-9.0.1/code/modules/accessibility.js"></script>

<script src="{{ STATIC_URL }}geonode/js/datatables/jquery.dataTables.min.js"></script>
<script src="{{ STATIC_URL }}geonode/js/datatables/dataTables.bootstrap.min.js"></script>

<script type="text/javascript" src="{% url 'javascript-catalog-intake' %}"></script>
<script src="{{ STATIC_URL }}waterproof_intake/js/jquery.smartWizard.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Leaflet.Editable.js"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Leaflet.Coordinates.js"></script>
<script src="{{ STATIC_URL }}geonode/js/leaflet/Control.Loader.js"></script>

<!--ZIP reader library-->
<script src="{{ STATIC_URL }}geonode/js/jszip/jszip.min.js"></script>
<!--Shapefile reader library -->
<script src="{{ STATIC_URL }}geonode/js/shp/shp.min.js"></script>
<script src="{{ STATIC_URL }}geonode/js/proj4js/proj4.js"></script>
<script type="text/javascript">
    var mxBasePath = '{{ STATIC_URL }}geonode/js/mxgraph/src';
    var mxImageBasePath = '{{ STATIC_URL }}geonode/js/mxgraph/examples/images';
    var editorUrl = '{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/config/diagrameditor.xml';
    var serverApi = '{{serverApi}}';
    var lang = '{{LANGUAGE_CODE}}';
    let waterproof = {};
    OSM_BASEMAP_URL = '{{ OSM_BASEMAP_URL }} ';
    IMG_BASEMAP_URL = '{{ IMG_BASEMAP_URL }} ';
    HYDRO_BASEMAP_URL = '{{ HYDRO_BASEMAP_URL }} ';
    GRAY_BASEMAP_URL = '{{ GRAY_BASEMAP_URL }} ';
    GEOSERVER_WMS = '{{ GEOSERVER_WMS }}';
    HYDRO_NETWORK_LYR = '{{ HYDRO_NETWORK_LYR }}';
</script>
<script src="{{ STATIC_URL }}waterproof_reports/js/physicalIndicators.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/mxClient.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/js/app.js"></script>
<script src="{{ STATIC_URL }}geonode/js/mxgraph/examples/editors/js/app.js"></script>
<script src="{{ STATIC_URL }}waterproof_intake/mathquill/mathquill.min.js"></script>
<script src="{{ STATIC_URL }}waterproof_reports/js/physicalIndicators.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script type="text/javascript">
    var e = document.getElementById("selectIntake");
    var table = $('#example').DataTable({
        'dom': 'lrtip'
    });
    
    console.log(table.rows())
    function show(){
       // a=document.querySelectorAll('#valor1').innerHTML
        table.search(e.value).draw();
        console.log(e.value)

        var value_awy = document.getElementById("valor1").innerText;
        var value_bf_m3 = document.getElementById("valor2").innerText;
        var value_wsed_ton = document.getElementById("valor3").innerText;
        var value_wn_kg = document.getElementById("valor4").innerText;
        var value_wp_kg = document.getElementById("valor5").innerText;
        var value_wc_ton = document.getElementById("valor6").innerText;

        console.log("valor filtro es "+value_awy)

        //console.log(a);

        Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: e.value
            },
            xAxis: {
                categories: ['{% trans "Change in volume of water yield (%)" %}', '{% trans "Change in base flow(%)" %}', '{% trans "Change in total sediments (%)" %}', '{% trans "Change in nitrogen load (%)" %}', '{% trans "Change in phosphorus Load (%)" %}', '{% trans "Change in carbon storage" %}']
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Intake',
                data: [parseFloat(value_awy), parseFloat(value_bf_m3), parseFloat(value_wsed_ton), parseFloat(value_wn_kg), parseFloat(value_wp_kg), parseFloat(value_wc_ton)]
            }]
        });

    }
    e.onchange=show;
    
    
</script>

<script type="text/javascript">

   



</script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.9/validator.min.js"
    integrity="sha512-dTu0vJs5ndrd3kPwnYixvOCsvef5SGYW/zSSK4bcjRBcZHzqThq7pt7PmCv55yb8iBvni0TSeIDV8RYKjZL36A=="
    crossorigin="anonymous"></script>-->
{% endblock %}